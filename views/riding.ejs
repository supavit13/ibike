<!DOCTYPE html>
<html>

<head>
    <% include head.ejs %>
</head>
<body>
    <% include navbar.ejs %>
        <div align="center" class="top">
            <div style="display: inline-block; margin:0%; width:29%;">
                <font size=4>Distance</font>
                <br>
                <font size=4>00.00</font>
                <br>
                <font size=2>Kilometer</font>
            </div>
            <div style=" display: inline-block; margin:0%; width:29%;">
                <font size=4>Time</font>
                <br>
                <font size=4 id="timer">00:00:00</font>
                <br>
                <font size=2>hh:mm:ss</font>
            </div>
            <div style=" display: inline-block; margin:0%; width:29%;">
                <font size=4>Cost</font>
                <br>
                <font size=4 id="cost">0</font> <font size=3 id="cost">Baht</font>
                <br>
                <font size=2 id="money">0.03</font><font size=2 > B/s</font>
            </div>
        </div>
        <div id="ridingMap"></div>
        <div align="center" class="bot">
            <a class="button green ui" id="pauseButton" style="display: inline-block; margin:0%; width:49%;">
                <p style="font-size:150%;" id="pauseValue">Pause</p>
            </a>
            <!-- <a href="/showbike" id="stopButton" class="button red ui" style="display: inline-block; margin:0%; width:49%;">
                <p style="font-size:150%;">Stop</p>
            </a> -->
            <a id="stopButton" class="button red ui" style="display: inline-block; margin:0%; width:49%;">
                <p style="font-size:150%;">Stop</p>
            </a>
        </div>

        <script>
            var marker;

            function initMap() {
                var myLatLng = { lat: 13.120, lng: 100.919 };

                var map = new google.maps.Map(document.getElementById('ridingMap'), {
                    zoom: 16,
                    center: myLatLng
                });

                marker = new google.maps.Marker({
                    position: { lat: 13.120, lng: 100.919 },
                    map: map,
                    animation: google.maps.Animation.DROP,
                    title: 'you are here'
                });
                marker.addListener('click', toggleBounce);
            }

            function toggleBounce() {
                if (marker.getAnimation() !== null) {
                    marker.setAnimation(null);
                } else {
                    marker.setAnimation(google.maps.Animation.BOUNCE);
                }
            }
        </script>
        <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB3gga67g_fXhRofEIdiQOXv8Yqf9vDkdc&callback=initMap">
        </script>

        <script>
            var timer = new Timer();
            var money = 0.03;
            var total=0;
            timer.start();
            timer.addEventListener('secondsUpdated', function (e) {
                var fulltime = timer.getTimeValues().toString();
                var delTime = fulltime.split(':')[0] + ":" + fulltime.split(':')[1];
                $('#timer').html(fulltime);
            });
            setInterval(function(){
                total += money;
                total = Math.round(total * 100) / 100;
                $('#cost').html(total);
            },1000);
            $('#stopButton').click(function(){
                // var value = $('#timer').text();;
                // var second = parseInt(value.split(":")[2]);
                // var minute = parseInt(value.split(":")[1]);
                // var hour = parseInt(value.split(":")[0]);
                // second = second + minute*60 + hour*60*60;
                // alert("Time : "+value+", Cost : "+ Math.round(second*0.03) +" Baht");
                if(confirm("Do you want to turn off engine?")){
                    timer.stop();
                    window.location.href = "/showbike";
                }
            });
            $('#pauseButton').click(function () {
                // alert(document.getElementById('pauseValue').innerHTML);
                if (document.getElementById('pauseValue').innerHTML == "Pause") {
                    $("#pauseButton").attr("class", "button blue ui");
                    document.getElementById('pauseValue').innerHTML = "";
                    document.getElementById('pauseValue').innerHTML = "Continue";
                    document.getElementById('money').innerHTML = "";
                    document.getElementById('money').innerHTML = "0.01";
                    money = 0.01;
                    // timer.pause();
                } else if (document.getElementById('pauseValue').innerHTML == "Continue") {
                    $("#pauseButton").attr("class", "button green ui");
                    document.getElementById('pauseValue').innerHTML = "";
                    document.getElementById('pauseValue').innerHTML = "Pause";
                    document.getElementById('money').innerHTML = "";
                    document.getElementById('money').innerHTML = "0.03";
                    money = 0.03;
                    // timer.start();
                }

            });

        </script>
</body>

</html>