<script>
    $("#start").on("click", function () {
        console.log("staaaart");
        if (document.getElementById("checkbox").checked) {
            microgear.publish("/startengine", "1");
            console.log("staaaart1");
        } else {
            microgear.publish("/startengine", "0");
            console.log("staaaart0");
        }
    });
    $("#stopButton").on("click", function () {
        console.log("stop");
        if(confirm("Do you want to turn off engine?")){
            timer.stop();
            window.location.href = "/showbike";
            microgear.publish("/startengine", "0");
        }
    });
    var APPID = "CMRM";
    var APPKEY = "Q22q476p7toHHLD";
    var APPSECRET = "x2ttOOD1vJqbqN5M9sJFdJO6Q";
    var ALIAS = "web";

    var microgear = Microgear.create({
        key: APPKEY,
        secret: APPSECRET,
        alias: ALIAS /*  optional  */
    });
    // var ackDevice = "";
    microgear.on('message', function (topic, msg) {
        console.log("in receive");
        console.log(msg);
        if (msg == "1") {
            window.location.replace("/riding");
        }
        document.getElementById("data").innerHTML = msg;
    });

    microgear.on('connected', function () {
        microgear.setAlias(ALIAS); /* alias can be renamed anytime with this function */
        document.getElementById("data").innerHTML = "Now I am connected with netpie...";
        console.log("working");
        microgear.publish("/working", "1");
        microgear.subscribe("/ackDevice");
    });

    microgear.on('present', function (event) {
        console.log(event);
    });

    microgear.on('absent', function (event) {
        console.log(event);
    });

    microgear.connect(APPID);
</script>